	Intel axxiaarm(64) Board Support Package


1. About this document
======================
This document describes the common and non-hardware specific information
about the Intel axxiaarm(64) board. Please refer to README.hardware
for hardware specific information.

Dependencies
------------
This layer depends on the oe-core version supplied with Wind River
Linux and the wr-kernel layer.

Maintenance
-----------
This layer is maintained by Wind River Systems, Inc.
Contact <support@windriver.com> or your support representative for more
information on submitting changes.

Building the axxiaarm(64) layer
-------------------------------
This layer and wr-kernel layer should be added to bblayers.conf. This
is done automatically when using the Wind River configure wrapper.

Note:
To build an axxiaarm BSP, use:

    --enable-board=axxiaarm

To build an axxiaarm64 BSP, use:

    --enable-board=axxiaarm64

License
-------
Copyright (C) 2016 Wind River Systems, Inc.

The right to copy, distribute or otherwise make use of this software may
be licensed only pursuant to the terms of an applicable Wind River license
agreement. No license to Wind River intellectual properly rights is granted
herein. All rights not licensed by Wind River are reserved by Wind River.

Source code included in tree for individual recipes is under the LICENSE
stated in each recipe (.bb file) unless other stated.

2. BSP Kernel and RootFS Combination
====================================

The validity of WindRiver Linux kernel and RootFS combination for this BSP is
in the table.
The leftmost column of the table is the kernel type, and the top line is the
RootFS type.
'Y' in each content cell stands for the combination is supported; 'N' stands
for not supported:

--------------------------------------------------------------------
| kernel/rootfs | glibc_std | glibc_small | glibc_cgl | glibc_tiny |
--------------------------------------------------------------------
|   standard    |     Y     |      Y      |     N     |     N      |
--------------------------------------------------------------------
|   preempt_rt  |     Y     |      Y      |     N     |     N      |
--------------------------------------------------------------------
|   cgl         |     N     |      N      |     Y     |     N      |
--------------------------------------------------------------------

Note:
1. With regard to the kernel and RootFS type, please refer to WindRiver Linux
specification for details.

3. Board Specific Patches
=========================

To get a list of patches applied to the kernel specific to this BSP
along with patch descriptions use git whatchanged on the default
kernel (git whatchanged <kernel_type>..<bsp_name>). For example:

  # cd build/linux-windriver/linux
	# git whatchanged standard/base..

4. Axxiaarm board boot Instructions
===================================

4.1 NFS Root File System (hardware only)
----------------------------------------

Configure u-boot with target IP, tftp server, netmask and other required
network values:

 u-boot=> setenv ethact LSI_FEMAC
 u-boot=> setenv ad_value 0x61
 u-boot=> setenv bootm_high 0x20000000
 u-boot=> setenv bootm_low 0x10000000
 u-boot=> setenv fdt_high 0xffffffff
 u-boot=> setenv macspeed 100MF
 u-boot=> setenv ipaddr <target IP>
 u-boot=> setenv serverip <nfs server IP>
 u-boot=> setenv gatewayip <gateway IP>
 u-boot=> setenv netmask <netmask>
 u-boot=> setenv rootpath <nfs root>
 u-boot=> tftp 0x4000000 uImage
 u-boot=> tftp 0x4500000 axm5516-amarillo.dtb
 u-boot=> setenv bootargs console=ttyAMA0,115200 root=/dev/nfs rw \
          nfsroot=$(serverip):$(rootpath) \
          ip=$(ipaddr)::$(gatewayip):$(netmask)::eth0:off
 u-boot=> bootm 0x4000000 - 0x4500000

5. Multilib
==========

By default, when you configure project with --enable-board=axxiaarm64,
the BSP is configured as a 64-bit kernel and 64-bit userspace.

To add 32-bit multilib support for a specific package, please use:

   make lib32-<pkg-name>

If a full 32-bit filesystem is necessary, 64-bit kernel and 32-bit rootfs combination,
please append the following into your project configuration command:

   --enable-multilib=lib32

6. Axxiaarm board Features
==========================

6.1 OProfile
------------

This BSP does not have an available hardware performance counter,
so OProfile must resort to the timer mode. If you are using OProfile
you need to add "oprofile.timer=1" to the kernel boot options.

6.2 kexec/kdump
---------------

For discussion purposes, some useful terminology will be described here.

boot kernel - the first kernel that you start and supports kexec, from u-boot
	          for instance.
capture kernel - the kernel that you reboot into after a boot kernel crash.

To build the boot or capture kernel, use the following option with the configure
command for your project:

     --with-template=feature/kexec

For dump-capture kernel:
Before boot dump-capture kernel, please add "maxcpus=1" to the boot parameter.
And it requires the following adjustments to the default kernel configuration:
	Kernel hacking  --->
		[ ] Tracers  --->

NOTE: kdump feature is not supported.

6.3 Ramdisk
-----------

Before using ramdisk, please set initrd_high to 0xffffffff to implies that the
initrd are initially copied to working addresses. This will avoid an additional
copy. otherwise initrd will be relocated to random address.

	In the u-boot terminal:
	$ setenv initrd_high 0xffffffff

And the ramdisk must be download to the lowmem region.

Note:
lowmem: linux memory that is always mapped into the kernel's address space.

7. Axxiaarm64 simulator
=======================

To boot up the WRLinux on the Intel simulator, users should ask for simulator
installation and setup guide from Intel Corp first, then follow the guide, set
up a workable environment for the simulator.

8. Axxiaarm64 Features
======================

8.1 kgdboe and kgdboc under simulator
-------------------------------------

Currently, we don't have a workable way to bind the simulator ethernet card
and simulator serial port to the host machine, so kgdboe and kgdboc are
not tested under simulator.

8.2 kdump and kexec
-------------------

Both simulator and axm5616 Victoria board do not support kexec and kdump.

8.3 OProfile
------------

Both simulator and axm5616 Victoria board do not support OProfile.
